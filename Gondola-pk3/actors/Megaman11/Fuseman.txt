// Credits to Dimpsy for Fuseman skin!
// Credits to Redflash for the better Fuseman skin!

actor Fuseman : LightClassBase
{
	Player.ScoreIcon "C_11F0X"
	player.startitem "LightHealthBar"
	player.displayname "Fuseman"
	player.soundclass "fusemanc"
	player.jumpz 14
	player.startitem "ScrambleThunderBossC", 1

//player.startitem "BounceBallWeakness2", 1

player.startitem "ReboundStrikerWeakness", 1
//player.startitem "BounceBallWeakness", 1

	States
	{
		Spawn:
			FUSM A 0
			FUSM B 1
			FUSM A 1 A_ChangeFlag(FLOATBOB, false)
			FUSM A 0 A_JumpIfInventory("FuseInDashState",1,"OnDash")
			Goto Spawn+2
		See:
			FUSM B 0 A_ChangeFlag(FLOATBOB, true)
			FUSM BCDE 2 A_JumpIfInventory("FuseInDashState",1,"OnDash")
			Goto Spawn
		Missile:
			FUSM F 0 A_ChangeFlag(FLOATBOB, false)
			FUSM FFFFF 1 A_JumpIfInventory("FuseInDashState",1,"OnDash")
			FUSM GGGG 1 A_JumpIfInventory("FuseInDashState",1,"OnDash")
			goto Spawn
			
		OnDash:
			FUSM WXYYXW 1 A_ChangeFlag(FLOATBOB, false)
			FUSM W 0 A_JumpIfInventory("FuseInDashState",1,"OnDash")
			goto Spawn
			

		ClassPain:
			FUSM H 0 A_ChangeFlag(FLOATBOB, false)
			goto PainContinue
		DeathFix:
			FUSM H 0 A_ChangeFlag(FLOATBOB, false)
			FUSH H 0 A_TakeInventory("FusemanFuse4",1)
			FUSH H 0 A_TakeInventory("FusemanFuse3",1)
			FUSH H 0 A_TakeInventory("FusemanFuse2",1)
			FUSH H 0 A_TakeInventory("FusemanFuse1",1)
			FUSH H 0 Thing_remove(tid+10000)
			FUSH H 0 Thing_remove(tid+10100)
			FUSH H 0 Thing_remove(tid+10200)
			FUSH H 0 Thing_remove(tid+10300)
			goto DeathContinue
		ClassDeath:
			FUSM H 1 A_ChangeFlag(FLOATBOB, false)
			FUSH H 0 A_TakeInventory("FusemanFuse4",1)
			FUSH H 0 A_TakeInventory("FusemanFuse3",1)
			FUSH H 0 A_TakeInventory("FusemanFuse2",1)
			FUSH H 0 A_TakeInventory("FusemanFuse1",1)
			FUSH H 0 Thing_remove(tid+10000)
			FUSH H 0 Thing_remove(tid+10100)
			FUSH H 0 Thing_remove(tid+10200)
			FUSH H 0 Thing_remove(tid+10300)
			goto MegaDeathEnd
			
		Death.Falling:
			FUSM H 0 A_ChangeFlag(FLOATBOB, false)
			FUSH H 0 A_TakeInventory("FusemanFuse4",1)
			FUSH H 0 A_TakeInventory("FusemanFuse3",1)
			FUSH H 0 A_TakeInventory("FusemanFuse2",1)
			FUSH H 0 A_TakeInventory("FusemanFuse1",1)
			FUSH H 0 Thing_remove(tid+10000)
			FUSH H 0 Thing_remove(tid+10100)
			FUSH H 0 Thing_remove(tid+10200)
			FUSH H 0 Thing_remove(tid+10300)
			FUSH H 0 A_GiveInventory("FallingFlag",1)
			FUSH H 0 A_GiveInventory("DeadClassBundle")
			FUSH H 0 A_SetTranslucent(0.0,0)
			FUSH H 0 A_PlaySoundEx("*death","Voice")
			goto DeathWait
	}
}
