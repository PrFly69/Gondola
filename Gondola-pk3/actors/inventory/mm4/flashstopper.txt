actor FlashStopperWep : BaseMM8BDMWep 10078
{
//$Category MM8BDM-Weapons
//$Title Flash Stopper
Weapon.AmmoUse 7
Weapon.AmmoGive 28
Weapon.SlotNumber 6
Inventory.Pickupmessage "$PU_FLASHSTOPPER"
Obituary "$OB_FLASHSTOPPER"
Tag "$TAG_FLASHSTOPPER"
weapon.ammotype "FlashStopperAmmo"
inventory.icon "BRIGHSI"
States
{
SpawnLoop:
WEA3 E -1
loop
Ready:
FSTO A 0 ACS_ExecuteAlways(998,0,49)
FSTO A 1 A_WeaponReady
Goto Ready+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
FSTO A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
FSTO A 1 A_Raise
Loop
Fire:
FSTO A 0 A_JumpIfNoAmmo("NoAmmo")
FSTO BC 2 
FSTO A 0 A_SpawnItemEx("FlashStopperFX",0,0,64)
FSTO A 0 A_PlaySoundEx("weapon/flashstopper","Weapon")
FSTO A 0 A_FireCustomMissile("FlashStopper",0,1,8,0)
FSTO D 40
FSTO C 3 
FSTO A 0 A_Refire
Goto Ready+1

NoAmmo:
FSTO A 1 ACS_Execute(979,0)
Goto Ready+1
}
}


actor FlashStopperGiver : CustomInventory //10078
{
//$Category MM8BDM-Weapons
//$Title Flash Stopper
Inventory.Pickupmessage "$PU_FLASHSTOPPER"
inventory.pickupsound "weapon/weaponup"
Inventory.RespawnTics 1800
scale 2.0
states
{
Spawn:
WEA3 E 1
loop
Pickup:
WEA3 E 0 A_JumpIfInventory("FlashStopperWep",1,"Failure")
WEA3 E 0 A_GiveInventory("FlashStopperWep")
stop
Failure:
WEA3 E 0 
fail
}
}

actor FlashStopper
{
-SOLID
+NOGRAVITY
PROJECTILE
+DONTBLAST
+NOINTERACTION
damage 0
radius 1
height 1
damagetype "FlashStopper"
Obituary "$OB_FLASHSTOPPER"
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_GiveToTarget("FlashStopperFlash", 1)
TNT1 A 1 A_Explode(5, 450,0)
stop
}
}

actor FlashStopperFlash : CustomInventory
{
	+INVENTORY.AUTOACTIVATE
	States
	{
	Use:
		TNT1 A 0 A_SetBlend("99 99 99", 0.95, 15)
		stop
	}
}

actor FlashStopperAmmo : Ammo
{
inventory.amount 1
inventory.maxamount 28
+INVENTORY.IGNORESKILL
}

actor Flashed : PowerDamage
{
powerup.duration 105
damagefactor "normal", 1.0
}

actor BrightBlind : Inventory
{
inventory.amount 1
inventory.maxamount 125
}

actor FlashStopperFX
{
renderstyle translucent
+NOINTERACTION
+FORCEXYBILLBOARD
+CLIENTSIDEONLY
height 1
radius 1
alpha 1.0
scale 5.0
-SOLID
+NOGRAVITY
states
{
Spawn:
FST2 ABCDEF 1 A_FadeOut(0.12)
stop
}
}

